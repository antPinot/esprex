const environment = process.env.NODE_ENV

console.log(`Projet démarré en ${environment}`)

const http =  require('http')
const https =  require('https')

const envVariables = require(`../environment/env.${environment}`)

const httpsOptions = {
    cert : envVariables.security.cert,
    key : envVariables.security.key
}

http.createServer((req, res) => {
    const newUrl = "https://localhost:7879"
    res.writeHead(301, {
        "Location" : newUrl
    })
    res.end()
})
.listen(envVariables.port.http)

https.createServer(httpsOptions,(req, res) => {
    res.end('HTTPS')
})
.listen(envVariables.port.https)